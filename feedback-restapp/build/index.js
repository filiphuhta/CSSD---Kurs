(()=>{"use strict";var e={n:t=>{var r=t&&t.__esModule?()=>t.default:()=>t;return e.d(r,{a:r}),r},d:(t,r)=>{for(var o in r)e.o(r,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:r[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=require("router");var r=e.n(t);require("appData"),require("Properties");const o=require("events");var n=e.n(o);const a=require("MailBuilder");var i=e.n(a);const s=require("ResourceLocatorUtil");var u=e.n(s);const d=require("LogUtil");var c=e.n(d);const l=require("storage");var f=e.n(l)().getCollectionDataStore("feedbackStore");r().get("/getFeedback",(function(e,t){var r=f.find("*").toArray();t.status(200).json({data:r})})),r().post("/addFeedback",(function(e,t){c().info(JSON.stringify(t));var r=function(e){try{var t=f.add(e).dsid;f.instantIndex(t)}catch(e){c().info("Could not write to DataStore")}}(t.value);t.status(200).json({data:r})})),n().on("sv:publishing:publish",(function(e){var t=u().getNodeByIdentifier(e.node);c().info(JSON.stringify(e)),i().setSubject(t+"was published").setTextMessage(e.emitter+"published"+t).addRecipient("filip.huhta@consid.se").build().send()})),r().put("/myroute",(function(e,t){t.json({message:"Hello from PUT"})})),r().delete("/myroute",(function(e,t){t.json({message:"Hello from DELETE"})}))})();